syntax = "proto3";

package api.agent_workspace.v1;
import "google/api/annotations.proto";
import "agent/v1/agent.proto";

option go_package = "github.com/johnsonoklii/agentgo/apps/agentService/api/agent_workspace/v1;v1";

service AgentWorkspace {
  // 获取工作区下的Agent列表
  rpc GetWorkspaceAgents (GetWorkspaceAgentsRequest) returns (GetWorkspaceAgentsResponse) {
    option (google.api.http) = {
      get: "/v1/agent/workspaces/agents"
    };
  }

  // 添加Agent到工作区
  rpc AddAgentToWorkspace (AddAgentToWorkspaceRequest) returns (AddAgentToWorkspaceResponse) {
    option (google.api.http) = {
      post: "/v1/agent/workspaces/{agentId}"
      body: "*"
    };
  }

  // 删除工作区中的Agent
  rpc RemoveAgentFromWorkspace (RemoveAgentFromWorkspaceRequest) returns (RemoveAgentFromWorkspaceResponse) {
    option (google.api.http) = {
      delete: "/v1/agent/workspaces/agents/{agentId}"
    };
  }
  
  // 设置Agent的模型配置
  rpc UpdateModalConfig (UpdateModalConfigRequest) returns (UpdateModalConfigResponse) {
    option (google.api.http) = {
      put: "/v1/agent/workspaces/{agentId}/model/config"
      body: "*"
    };
  }
}

// 获取工作区Agent列表请求
message GetWorkspaceAgentsRequest {
  string workspaceId = 1;
}

// 获取工作区Agent列表响应
message GetWorkspaceAgentsResponse {
  int32 code = 1;
  string message = 2;
  repeated agent.v1.AgentInfo data = 3;
}

// 添加Agent到工作区请求
message AddAgentToWorkspaceRequest {
  string agentId = 1;
  string workspaceId = 2;
}

// 添加Agent到工作区响应
message AddAgentToWorkspaceResponse {
  int32 code = 1;
  string message = 2;
}

// 从工作区删除Agent请求
message RemoveAgentFromWorkspaceRequest {
  string agentId = 1;
  string workspaceId = 2;
}

// 从工作区删除Agent响应
message RemoveAgentFromWorkspaceResponse {
  int32 code = 1;
  string message = 2;
}

// 设置Agent模型配置请求
message UpdateModalConfigRequest {
  string agentId = 1;
  string modalId = 2;
  float temperature = 3;  // 0 <= x <= 2
  float topP = 4;         // 0 <= x <= 1
  int32 maxTokens = 6;    // >= 1
  float reserveRatio = 7;
  int32 SummaryThreshold = 8;
  StrategyType strategyType = 9;
}

// 设置Agent模型配置响应
message UpdateModalConfigResponse {
  int32 code = 1;
  string message = 2;
}

// 策略类型枚举
enum StrategyType {
  NONE = 0;             // 无策略
  SLIDING_WINDOW = 1;   // 滑动窗口
  SUMMARIZE = 2;        // 总结
}